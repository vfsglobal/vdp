[data-column-details] {
  display: flex;
  flex-wrap: wrap;
  > * {
    display: flex;
    @extend %marb_small;
    box-sizing: border-box;
  }
}

$first_res: Sdesktop;

@mixin set_column($column, $margin_right) {
  > * {
    width: (100 - (($column - 1) * $margin_right)) / $column;
    &:not(:nth-child(#{$column}n)) {
      margin-right: $margin_right;
    }
    &:last-child {
      margin-right: 0%;
    }
    $last_row_first_child_selector: "&:nth-child(#{$column}n+1):nth-last-child(-n+#{$column})";
    #{$last_row_first_child_selector},
    #{$last_row_first_child_selector} ~ * {
      margin-bottom: 0px !important;
    }
  }
}
@function autocorrect_res($res) {
  @return if(type-of($res) == "string", abs(map-get($media_resolutions, $res)), $res);
}
@mixin set_multi_column($column_details, $margin_right, $center_items: true) {
  @if ($center_items) {
    justify-content: center;
  }

  $all_res: map-keys($column_details);
  $count: length($all_res);

  @for $i from 1 through $count {
    $res_key: nth($all_res, $i);
    $res: autocorrect_res($res_key);
    $next_res: autocorrect_res(if($i == $count, null, nth($all_res, $i + 1)));

    $media: if($res == null, "", "(max-width: " + $res + "px)");
    $media: $media + if($next_res == null, "", if($media == "", "", " and ") + "(min-width: " + ($next_res + 1) + "px)");

    @media screen and #{$media} {
      @include set_column(map-get($column_details, $res_key), $margin_right);
    }
  }
}
[data-column-details="col6_details"] {
  @include set_multi_column(
    (
      null: 6,
      $first_res: 4
    ),
    $box_spacing
  );
}
[data-column-details="full_col4_details"] {
  @include set_multi_column((
    null: 4,
    $first_res: 3
  ), 0%);
}
[data-column-details="col4_details"] {
  @include set_multi_column((
    null: 4,
    $first_res: 3
  ), $box_spacing);
}
[data-column-details="col4_details_big"] {
  @include set_multi_column((
    null: 4,
    $first_res: 3
  ), $box_big_spacing);
}
[data-column-details="col2_details"] {
  @include set_multi_column((
    null: 2,
    $first_res: 1
  ), $box_spacing);
}
[data-column-details="full_col2_details"] {
  @include set_multi_column((
    null: 2,
    $first_res: 1
  ), 0%);
}
